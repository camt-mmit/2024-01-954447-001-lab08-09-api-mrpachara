import{a as Ge,b as Ie,c as B,d as V,e as H,f as Le,g as Q,h as Ne,i as J,j as ze,k as Y,l as Z}from"./chunk-JTVDBTOM.js";import{A as se,Aa as Ee,B as ce,Ba as we,C as ve,Ca as C,D as be,Ea as Me,Fa as j,H as w,I as D,K as U,Ka as Oe,L as Ce,La as q,M as m,Pa as K,Qa as Re,Ra as M,S as f,Sa as $,Ta as Ae,W as b,Z as _,_ as _e,a as p,aa as v,b as y,c as de,ca as xe,d as T,da as Te,ea as i,fa as a,g as ue,ga as g,h as z,j as G,ja as le,ka as h,l as fe,la as k,m as ge,n as F,o as I,p as he,pa as s,qa as L,ra as De,sa as Pe,t as E,ta as Se,v as ye,w as l,za as ke}from"./chunk-BFXZW65W.js";var W=class n{data=D();disabled=D(!1,{transform:Ee});formSubmit=w();formCancel=w();fb=l(Y).nonNullable;createFormGroup=e=>this.fb.group({summary:this.fb.control(e?.summary??"",{updateOn:"blur"}),description:this.fb.control(e?.description??"",{updateOn:"blur"}),start:this.fb.group({dateTime:this.fb.control(e?.start?.dateTime??"",{updateOn:"blur"}),timeZone:this.fb.control(Intl.DateTimeFormat().resolvedOptions().timeZone)}),end:this.fb.group({dateTime:this.fb.control(e?.start?.dateTime??"",{updateOn:"blur"}),timeZone:this.fb.control(Intl.DateTimeFormat().resolvedOptions().timeZone)})});formGroup=C(()=>this.createFormGroup(this.data()));constructor(){Me(()=>{this.disabled()?this.formGroup().enabled&&this.formGroup().disable({onlySelf:!0}):this.formGroup().disabled&&this.formGroup().enable({onlySelf:!0})})}normalizeDateTimeLocal(e){let[t,o]=e.split("T"),r=o.split(":");for(;r.length<3;)r.push("00");return`${t}T${r.join(":")}`}onSubmit(){if(this.formGroup().valid){let e=this.formGroup().getRawValue();e.start.dateTime=this.normalizeDateTimeLocal(e.start.dateTime),e.end.dateTime=this.normalizeDateTimeLocal(e.end.dateTime),this.formSubmit.emit(e)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-event-form"]],inputs:{data:[1,"data"],disabled:[1,"disabled"]},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},decls:27,vars:2,consts:[["ngNativeValidate","",3,"ngSubmit","formGroup"],[1,"app-cmp-data-form","-cl-container",3,"disabled"],[1,"app-cl-field"],[1,"app-cl-title"],["type","text","formControlName","summary","required","",1,"app-cl-control"],["formGroupName","start",1,"app-cl-field"],["type","datetime-local","formControlName","dateTime","required","",1,"app-cl-control"],["formGroupName","end",1,"app-cl-field"],["formControlName","description","rows","5",1,"app-cl-control"],[1,"-cmp-actions-bar"],["type","submit",1,"app-cl-button","app-cl-primary"],[1,"material-symbols-outlined"],["type","button",1,"app-cl-button","app-cl-warn","-cl-meta",3,"click"]],template:function(t,o){t&1&&(i(0,"form",0),h("ngSubmit",function(){return o.onSubmit()}),i(1,"fieldset",1)(2,"label",2)(3,"b",3),s(4,"Summary*"),a(),g(5,"input",4),a(),i(6,"label",5)(7,"b",3),s(8,"Start*"),a(),g(9,"input",6),a(),i(10,"label",7)(11,"b",3),s(12,"End*"),a(),g(13,"input",6),a(),i(14,"label",2)(15,"b",3),s(16,"Description"),a(),g(17,"textarea",8),a(),i(18,"div",9)(19,"button",10)(20,"i",11),s(21,"send"),a(),s(22," Create "),a(),i(23,"button",12),h("click",function(){return o.formCancel.emit()}),i(24,"i",11),s(25,"cancel"),a(),s(26," Cancel "),a()()()()),t&2&&(_("formGroup",o.formGroup()),m(),_("disabled",o.formGroup().disabled))},dependencies:[Z,B,V,H,ze,Q,J,Ne],styles:["[_nghost-%COMP%]{box-sizing:border-box;display:block}.-cl-container[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}.-cmp-actions-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:1em 0;column-gap:8px}.-cmp-actions-bar[_ngcontent-%COMP%] > .-cl-meta[_ngcontent-%COMP%]{margin-left:auto}"],changeDetection:0})};function Fe(n,e=!1){let o=new Uint8Array(n).reduce((c,d)=>`${c}${String.fromCharCode(d)}`,""),r=btoa(o);return e?Ze(r):r}function Ze(n){return n.replaceAll(/\+/g,"-").replaceAll(/\//g,"_").replace(/=/g,"")}function We(n){return n.replaceAll(/_/g,"/").replaceAll(/-/g,"+")}function pe(n){let e=new Uint32Array(n/2);return crypto.getRandomValues(e),Array.from(e,t=>`0${t.toString(16)}`.slice(-2)).join("")}async function Ue(n){let t=new TextEncoder().encode(n);return crypto.subtle.digest("SHA-256",t)}function je(n){let[,e]=n.split(".");return JSON.parse(atob(We(e)))}function Ke(n){return typeof n.date<"u"}function N(n){return typeof n.dateTime<"u"}function Xe(n){if(N(n)){let e=n,{dateTime:o}=e,r=T(e,["dateTime"]);return y(p({},r),{dateTime:new Date(o)})}else{let t=n,{date:o}=t,r=T(t,["date"]);return y(p({},r),{date:new Date(`${o}T00:00:00`)})}}function et(n){let c=n,{start:e,end:t}=c,o=T(c,["start","end"]);function r(d,u){return typeof u>"u"?{}:{[d]:p({},Xe(u))}}return p(p(p({},o),r("start",e)),r("end",t))}function $e(n){return y(p({},n),{items:(n?.items||[]).map(et)})}function Be(n){let[e,t]=(N(n)?n.dateTime:n.date).toISOString().split("T");return{date:e,time:Ke(n)?null:t}}function R(n){if(N(n)){let{dateTime:e}=n;return e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}else{let{date:e}=n;return e.toLocaleDateString(void 0,{dateStyle:"medium"})}}function tt(n){return(N(n)?n.dateTime:n.date).toLocaleTimeString(void 0,{timeStyle:"short"})}function Ve(n){let{start:e,end:t}=n;if(e&&t){let o=Be(e),r=Be(t);return o.date===r.date?o.time===r.time?R(e):`${R(e)} - ${tt(t)}`:`${R(e)} to ${R(t)}`}else return e?R(e):t?R(t):"Unknown"}var X=class extends Error{name=this.constructor.name;constructor(e="Access Token not Found!!!",t){super(e,t)}},ee=class extends Error{name=this.constructor.name;constructor(e,t){super(`State token '${e}' is not found or expired!!`,t)}};var te=class n{async get(e){let t=localStorage.getItem(e);return JSON.parse(t??"null")}async set(e,t){let o=JSON.stringify(t);return localStorage.setItem(e,o)}async remove(e){return localStorage.removeItem(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};var nt=54,ot=32,rt=10*60*1e3,at=10*1e3,me=new ye("oauth-configuration"),x=class n{config=l(me);storage=l(te);http=l(q);storedRefreshTokenDataKey=`oauth-${this.config.name}-refresh-token`;storedIdTokenDataKey=`oauth-${this.config.name}-id-token`;storedParsedIdTokenDataKey=`oauth-${this.config.name}-parsed-id-token`;storedAccessTokenDataKey=`oauth-${this.config.name}-access-token`;storedStateDataKey=`oauth-${this.config.name}-states`;accessTokenResource=j({loader:async()=>(await this.getAccessTokenData())?.access_token??null});accessToken=C(this.accessTokenResource.value,{equal:(e,t)=>typeof t>"u"||Object.is(e,t)});ready=C(()=>{let e=this.accessToken();return typeof e>"u"?void 0:e!==null});storedIdTokenResource=j({loader:async()=>await this.fetchIdTokenData()});idToken=C(this.storedIdTokenResource.value,{equal:(e,t)=>typeof t>"u"||Object.is(e,t)});async storeRefreshTokenData(e){return await this.storage.set(this.storedRefreshTokenDataKey,e),e}async fetchRefreshTokenData(){return await this.storage.get(this.storedRefreshTokenDataKey)}async removeRefreshTokenData(){await this.storage.remove(this.storedRefreshTokenDataKey)}async storeIdTokenData(e){return await this.storage.set(this.storedIdTokenDataKey,e),await this.storage.set(this.storedParsedIdTokenDataKey,p(p({},await this.storage.get(this.storedParsedIdTokenDataKey)),je(e))),this.storedIdTokenResource.set(e),e}async fetchIdTokenData(){return await this.storage.get(this.storedIdTokenDataKey)}async removeIdTokenData(){await this.storage.remove(this.storedParsedIdTokenDataKey),await this.storage.remove(this.storedIdTokenDataKey),this.storedIdTokenResource.set(null)}async fetchParsedIdTokenData(){return await this.storage.get(this.storedParsedIdTokenDataKey)}async storeAccessTokenData(e){let d=e,{refresh_token:t,id_token:o}=d,r=T(d,["refresh_token","id_token"]);t&&await this.storeRefreshTokenData(t),o&&await this.storeIdTokenData(o);let c=y(p({},r),{expiredAt:Date.now()+r.expires_in*1e3-at});return await this.storage.set(this.storedAccessTokenDataKey,c),this.accessTokenResource.set(c.access_token),c}async fetchAccessTokenData(){return await this.storage.get(this.storedAccessTokenDataKey)}async removeAccessTokenData(){await this.storage.remove(this.storedAccessTokenDataKey),this.accessTokenResource.set(null)}async refreshAccessTokenData(){let e=await this.fetchRefreshTokenData();if(e){let t=await z(this.http.post(this.config.accessTokenUrl,{client_id:this.config.clientId,client_secret:this.config.clientSecret,grant_type:"refresh_token",refresh_token:e}).pipe(ge(o=>(console.error(o?.error??o),ue(null)))));if(t)return await this.storeAccessTokenData(t)}return null}async getAccessTokenData(){return z(G(async()=>await this.fetchAccessTokenData()).pipe(I(async e=>e&&e.expiredAt>=Date.now()?Promise.resolve(e):await this.refreshAccessTokenData())))}async getAuthorizationHeaders(){let e=await this.getAccessTokenData();if(e){let{token_type:t,access_token:o}=e;return{Authorization:`${t[0].toUpperCase()}${t.slice(1)} ${o}`}}throw new X}async fetchStateData(e){let t=await this.storage.get(this.storedStateDataKey)??{},o=Date.now(),r=Object.entries(t),c=r.filter(([,u])=>u.expiredAt>=o),d=Object.fromEntries(c);return r.length!==c.length&&await this.storage.set(this.storedStateDataKey,d),d[e]??null}async storeStateData(e,t){let o=await this.storage.get(this.storedStateDataKey)??{};return o[e]=y(p({},t),{expiredAt:Date.now()+rt}),await this.storage.set(this.storedStateDataKey,o)}async removeStateData(e){let c=await this.storage.get(this.storedStateDataKey)??{},{[e]:o}=c,r=T(c,[de(e)]);Object.keys(r).length===0?await this.clearStateData():await this.storage.set(this.storedStateDataKey,r)}async clearStateData(){await this.storage.remove(this.storedStateDataKey)}async createStateData(e){let t=pe(ot),o=pe(nt),r=Fe(await Ue(o),!0);return await this.storeStateData(t,{codeVerifier:o,state:e}),{stateToken:t,codeChallenge:r}}async getAuthorizationUrl(e,{state:t={},additionalParams:o={}}={}){let r=this.config.authorizationCodeUrl;if(r){let{stateToken:c,codeChallenge:d}=await this.createStateData(t),u=new URL(r);return u.searchParams.set("client_id",this.config.clientId),u.searchParams.set("response_type","code"),u.searchParams.set("scope",e.join(" ")),u.searchParams.set("state",c),u.searchParams.set("code_challenge",d),u.searchParams.set("code_challenge_method","S256"),u.searchParams.set("redirect_uri",this.config.redirectUri),Object.entries(o).forEach(([Qe,Je])=>u.searchParams.set(Qe,Je)),u}else return null}async exchangeAuthorizationcode(e,t){let o=await this.fetchStateData(t);if(o===null)throw new ee(t,{cause:{authorizaitonCode:e}});return await this.storeAccessTokenData(await z(this.http.post(this.config.accessTokenUrl,{client_id:this.config.clientId,client_secret:this.config.clientSecret,code:e,code_verifier:o.codeVerifier,grant_type:"authorization_code",redirect_uri:this.config.redirectUri}))),await this.removeStateData(t),o.state}parsedIdToken=j({request:this.idToken,loader:async()=>await this.fetchParsedIdTokenData()}).value.asReadonly();computedParsedIdToken(e,t){let{computation:o,options:r}=typeof e=="function"?{computation:e,options:t}:{computation:void 0,options:typeof e<"u"?e:t};return C(()=>typeof o=="function"?o(this.parsedIdToken()):this.parsedIdToken(),r)}async clear(){await Promise.all([this.removeRefreshTokenData(),this.removeIdTokenData(),this.removeAccessTokenData(),this.storage.remove(this.storedStateDataKey)])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};var He="https://www.googleapis.com/calendar/v3/calendars/primary/events",it={eventTypes:["default","fromGmail"]},S=class n{http=l(q);oauthService=l(x);getAll(e,{injector:t=void 0}={}){return Ie({request:e,loader:({request:o,abortSignal:r})=>G(()=>this.oauthService.getAuthorizationHeaders()).pipe(I(c=>this.http.get(He,{headers:p({},c),params:p(y(p({},it),{timeMin:(()=>{let d=new Date;return d.setFullYear(d.getFullYear()-1),d.toISOString()})()}),o)})),he(fe(r,"abort").pipe(F(1)))),injector:t})}create(e){return G(()=>this.oauthService.getAuthorizationHeaders()).pipe(I(t=>this.http.post(He,e,{headers:p({},t)})))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};var ne=class n{service=l(S);disabled=U(!1);onFormSubmit(e){this.disabled.set(!0),this.service.create(e).pipe(F(1)).subscribe({complete:()=>history.back(),error:()=>this.disabled.set(!1)})}onFormCancel(){history.back()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-event-create-page"]],decls:1,vars:1,consts:[[1,"app-cl-main-content",3,"formSubmit","formCancel","disabled"]],template:function(t,o){t&1&&(i(0,"app-gl-event-form",0),h("formSubmit",function(c){return o.onFormSubmit(c)})("formCancel",function(){return o.onFormCancel()}),a()),t&2&&_("disabled",o.disabled())},dependencies:[W],encapsulation:2,changeDetection:0})};var A=class n{delay=D(0,{transform:we});apperDelay=C(()=>`${this.delay()/1e3}s`);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-loading"]],hostVars:2,hostBindings:function(t,o){t&2&&_e("---appear-delay",o.apperDelay())},inputs:{delay:[1,"delay"]},decls:1,vars:0,template:function(t,o){t&1&&s(0,`Loading...
`)},styles:["[_nghost-%COMP%]{color:#00000080;background:linear-gradient(to right,#fff 30%,#000 45% 55%,#fff 70%);background-size:200% auto;background-clip:text;animation:_ngcontent-%COMP%_shine .5s linear infinite,_ngcontent-%COMP%_appear var(---appear-delay, 0s) ease-in forwards}@keyframes _ngcontent-%COMP%_shine{to{background-position:-200% center}}@keyframes _ngcontent-%COMP%_appear{0%{opacity:0}to{opacity:1}}"],changeDetection:0})};var st=(n,e)=>e.id;function ct(n,e){n&1&&g(0,"app-gl-loading")}function lt(n,e){if(n&1&&s(0),n&2){let t=k().$implicit;De(" ",t.description," ")}}function pt(n,e){n&1&&(s(0," ["),i(1,"i"),s(2,"No description"),a(),s(3,"] "))}function mt(n,e){if(n&1&&(i(0,"section",9)(1,"details")(2,"summary")(3,"h3"),s(4),a()(),i(5,"p"),b(6,lt,1,1)(7,pt,4,0),a()(),i(8,"footer"),s(9),a()()),n&2){let t=e.$implicit;m(4),L(t.summary),m(2),v(t.description?6:7),m(3),L(t.displayDateTime)}}function dt(n,e){if(n&1&&(i(0,"div",8),xe(1,mt,10,3,"section",9,st),a()),n&2){let t=k();m(),Te(t.items)}}function ut(n,e){n&1&&(i(0,"p"),s(1,"Not found!!"),a())}function ft(n,e){n&1&&b(0,dt,3,0,"div",8)(1,ut,2,0,"p"),n&2&&v(e.items.length>0?0:1)}function gt(n){let r=$e(n),{items:t}=r,o=T(r,["items"]);return y(p({},o),{items:t.map(c=>y(p({},c),{displayDateTime:Ve(c)}))})}var oe=class n{data=D.required();queryParams=D({});isLoading=D(!1);queryParamsChange=w();reload=w();parsedData=C(()=>this.data()?gt(this.data()):void 0,{equal:(e,t)=>typeof t>"u"||Object.is(e,t)});fb=l(Y).nonNullable;formGroup=C(()=>this.fb.group({q:this.fb.control(this.queryParams().q??"",{updateOn:"submit"})}));onSubmit(){this.queryParamsChange.emit(this.formGroup().getRawValue())}clear(){this.queryParamsChange.emit({})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-events-list"]],inputs:{data:[1,"data"],queryParams:[1,"queryParams"],isLoading:[1,"isLoading"]},outputs:{queryParamsChange:"queryParamsChange",reload:"reload"},decls:15,vars:3,consts:[[1,"-cmp-search-box",3,"ngSubmit","formGroup"],[1,"-cl-field"],["type","text","inputmode","search","formControlName","q",1,"-cl-control"],["type","button",1,"app-cl-button","app-cl-warn",3,"click"],[1,"material-symbols-outlined"],[1,"-cmp-actions-bar"],[1,".-cl-actions-group","-cl-meta"],["type","button",1,"app-cl-button",3,"click"],[1,"-cmp-resoures-list"],[1,"-cmp-resource"]],template:function(t,o){if(t&1&&(i(0,"form",0),h("ngSubmit",function(){return o.onSubmit()}),i(1,"label",1)(2,"b"),s(3,"Search"),a(),g(4,"input",2),a(),i(5,"button",3),h("click",function(){return o.clear()}),i(6,"i",4),s(7,"close"),a()()(),i(8,"div",5),b(9,ct,1,0,"app-gl-loading"),i(10,"div",6)(11,"button",7),h("click",function(){return o.reload.emit()}),i(12,"i",4),s(13,"sync"),a()()()(),b(14,ft,2,1)),t&2){let r;_("formGroup",o.formGroup()),m(9),v(o.isLoading()?9:-1),m(5),v((r=o.parsedData())?14:-1,r)}},dependencies:[Z,Le,B,V,H,Q,J,A],styles:["[_nghost-%COMP%]{box-sizing:border-box;display:block}.-cl-hidden[_ngcontent-%COMP%]{display:none!important}.-cl-number-data[_ngcontent-%COMP%]{display:inline-block;width:3ch}.-cmp-search-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:stretch;margin-top:1em;margin-bottom:1em}.-cmp-search-box[_ngcontent-%COMP%] > .-cl-field[_ngcontent-%COMP%]{box-sizing:border-box;display:inline-flex;flex-direction:row;align-items:baseline;flex:1 0 auto}.-cmp-search-box[_ngcontent-%COMP%] > .-cl-field[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{box-sizing:border-box;height:100%}.-cmp-search-box[_ngcontent-%COMP%] > .-cl-field[_ngcontent-%COMP%] > .-cl-control[_ngcontent-%COMP%]{flex:1 0 auto}.-cmp-actions-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:8px;align-items:center}.-cmp-actions-bar[_ngcontent-%COMP%] > .-cl-actions-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.-cmp-actions-bar[_ngcontent-%COMP%] > .-cl-meta[_ngcontent-%COMP%]{margin-left:auto}.-cmp-resoures-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:8px;margin-top:1em;padding-bottom:1em}.-cmp-resource[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;padding:8px 3ch;border:1px solid var(--app-primary-color);border-radius:4px}.-cmp-resource[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0;padding:0}.-cmp-resource[_ngcontent-%COMP%] > details[_ngcontent-%COMP%] > summary[_ngcontent-%COMP%]{cursor:pointer}.-cmp-resource[_ngcontent-%COMP%] > details[_ngcontent-%COMP%] > summary[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline;margin:0;padding:0}.-cmp-resource[_ngcontent-%COMP%] > details[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{white-space:pre-wrap}.-cmp-resource[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]{margin-top:8px;font-size:smaller}"],changeDetection:0})};var re=class n{service=l(S);activatedRoute=l(K);queryParams$=this.activatedRoute.queryParams;queryParams=Ge(this.queryParams$,{initialValue:{}});resource=this.service.getAll(this.queryParams);router=l(M);onQuery(e){this.router.navigate([],{replaceUrl:!0,queryParams:e})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-events-list-page"]],decls:7,vars:3,consts:[[1,"app-cl-main-content"],["routerLink","create"],["type","button",1,"app-cl-button","app-cl-primary"],[1,"material-symbols-outlined"],[1,"app-cl-main-content",3,"queryParamsChange","reload","data","queryParams","isLoading"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"a",1)(2,"button",2)(3,"i",3),s(4,"add"),a(),s(5," Create "),a()()(),i(6,"app-gl-events-list",4),h("queryParamsChange",function(c){return o.onQuery(c)})("reload",function(){return o.resource.reload()}),a()),t&2&&(m(6),_("data",o.resource.value())("queryParams",o.queryParams())("isLoading",o.resource.isLoading()))},dependencies:[$,oe],encapsulation:2,changeDetection:0})};function ht(n,e){if(n&1&&s(0),n&2){let t=e;Pe(" ",t.error,": ",t.error_description,`
`)}}var ae=class n{activatedRoute=l(K);router=l(M);oauthService=l(x);#e=U((()=>{let e=this.activatedRoute.snapshot.queryParams.error,t=this.activatedRoute.snapshot.queryParams.error_description;return e||t?{error:e,error_description:t}:void 0})());error=this.#e.asReadonly();constructor(){(async()=>{let{code:e,state:t}=this.activatedRoute.snapshot.queryParams;if(e&&t)try{let o=await this.oauthService.exchangeAuthorizationcode(e,t);this.router.navigateByUrl(o.intendedUrl,{replaceUrl:!0})}catch(o){throw o instanceof Oe?this.#e.set(o.error):o instanceof Error&&this.#e.set({error:o.name,error_description:o.message}),o}else this.#e.set({error:"bad_response",error_description:"The response doesn't have 'code' or 'state'"})})()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-authorization-page"]],decls:1,vars:1,template:function(t,o){if(t&1&&b(0,ht,1,2),t&2){let r;v((r=o.error())?0:-1,r)}},encapsulation:2,changeDetection:0})};function yt(n,e){n&1&&g(0,"app-gl-loading")}function vt(n,e){if(n&1){let t=le();i(0,"div",2)(1,"button",3),h("click",function(){se(t);let r=k();return ce(r.login())}),g(2,"div",4),i(3,"div",5)(4,"div",6),ve(),i(5,"svg",7),g(6,"path",8)(7,"path",9)(8,"path",10)(9,"path",11)(10,"path",12),a()(),be(),i(11,"span",13),s(12,"Continue with Google"),a(),i(13,"span",14),s(14,"Continue with Google"),a()()(),i(15,"p",15),s(16," The content are avaliable after getting access token. "),a()()}}function bt(n,e){n&1&&g(0,"img",18),n&2&&_("src",e,Ce)}function Ct(n,e){n&1&&(i(0,"b"),s(1),a()),n&2&&(m(),L(e))}function _t(n,e){if(n&1&&b(0,bt,1,1,"img",18)(1,Ct,2,1,"b"),n&2){let t,o,r=e;v((t=r.picture)?0:-1,t),m(),v((o=r.name)?1:-1,o)}}function xt(n,e){if(n&1){let t=le();b(0,_t,2,2),i(1,"button",16),h("click",function(){se(t);let r=k();return ce(r.logout())}),i(2,"i",17),s(3,"delete_forever"),a(),s(4," Remove Token "),a()}if(n&2){let t,o=k();v((t=o.parsedIdToken())?0:-1,t)}}function Tt(n,e){n&1&&(i(0,"nav",19)(1,"ul")(2,"li")(3,"a",20),s(4,"Events"),a()()()(),g(5,"router-outlet"))}var Dt=["profile","https://www.googleapis.com/auth/calendar.events"],ie=class n{oauthService=l(x);router=l(M);parsedIdToken=this.oauthService.computedParsedIdToken();async login(){let e=await this.oauthService.getAuthorizationUrl(Dt,{state:{intendedUrl:this.router.url},additionalParams:{prompt:"consent",access_type:"offline"}});e&&(location.href=`${e}`)}async logout(){await this.oauthService.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-gl-page"]],decls:7,vars:2,consts:[[1,"app-cl-main-content"],[1,"-cmp-actions-bar"],[1,"-cmp-getting-access-token"],["type","button",1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"],[1,"-cl-page-message"],["type","button",1,"app-cl-button","app-cl-warn","-cl-meta",3,"click"],[1,"material-symbols-outlined"],["alt","Profile picture",1,"-cl-profile-image",3,"src"],[1,"app-cmp-links"],["routerLink","events","routerLinkActive","app-st-active"]],template:function(t,o){if(t&1&&(Se(0),i(1,"div",0)(2,"div",1),b(3,yt,1,0,"app-gl-loading")(4,vt,17,0,"div",2)(5,xt,5,1),a(),b(6,Tt,6,0),a()),t&2){let r,c=o.oauthService.ready();m(3),v((r=c)===void 0?3:r===!1?4:5),m(3),v(c?6:-1)}},dependencies:[Re,$,Ae,A],styles:[".-cl-profile-image[_ngcontent-%COMP%]{height:42px}.-cl-page-message[_ngcontent-%COMP%]{text-align:center}.-cmp-actions-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:8px;align-items:center;padding:16px 0;justify-content:center}.-cmp-actions-bar[_ngcontent-%COMP%] > .-cl-meta[_ngcontent-%COMP%]{margin-left:auto}.-cmp-getting-access-token[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;row-gap:16px}.gsi-material-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;border-radius:20px;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}"],changeDetection:0})};var To=[{path:"",providers:[{provide:me,useValue:{name:"google",clientId:"209689905225-dj1bo29m0c7or5926cv4bb1nu5aru0cv.apps.googleusercontent.com",clientSecret:"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",authorizationCodeUrl:"https://accounts.google.com/o/oauth2/v2/auth",accessTokenUrl:"https://oauth2.googleapis.com/token",redirectUri:ke()?"http://localhost:4200/google/authorization":"https://camt-mmit.github.io/2024-01-954447-001-lab08-09-api-mrpachara/google/authorization"}},x],children:[{path:"authorization",component:ae},{path:"",component:ie,children:[{path:"",redirectTo:"events",pathMatch:"full"},{path:"events",providers:[S],children:[{path:"",component:re},{path:"create",component:ne}]}]}]}];export{To as default};
